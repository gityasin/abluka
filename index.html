<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ABLUKA</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Lobby Screen -->
    <div id="lobbyScreen" class="lobby-screen">
      <div class="lobby-content">
        <h1 class="lobby-title">ABLUKA</h1>
        <p class="lobby-subtitle">Online Multiplayer</p>
        
        <div class="lobby-mode-selector">
          <button id="localPlayButton" class="lobby-button lobby-button--primary">
            Yerel Oyun
          </button>
          <button id="onlinePlayButton" class="lobby-button lobby-button--secondary">
            Ã‡EVRÄ°MÄ°Ã‡Ä° OYUN
          </button>
        </div>
        
        <div id="onlineOptions" class="online-options is-hidden">
          <div class="online-option">
            <button id="createGameButton" class="lobby-button lobby-button--primary">
              Oyun OluÅŸtur
            </button>
            <p class="online-help">Kodu arkadaÅŸÄ±nÄ±zla paylaÅŸÄ±n</p>
          </div>
          
          <div class="online-option">
            <input id="gameCodeInput" class="game-code-input" type="text" placeholder="Oyun kodunu girin" maxlength="6" />
            <button id="joinGameButton" class="lobby-button lobby-button--secondary">
              Oyuna KatÄ±l
            </button>
          </div>
          
          <button id="backToModeButton" class="lobby-button lobby-button--tertiary">
            Geri
          </button>
        </div>
        
        <div id="playerNameScreen" class="player-name-screen is-hidden">
          <h2 class="name-screen-title">AdÄ±nÄ±z</h2>
          <input id="playerNameInput" class="player-name-screen-input" type="text" placeholder="AdÄ±nÄ±zÄ± girin" maxlength="20" />
          <button id="continueNameButton" class="lobby-button lobby-button--primary">
            Devam Et
          </button>
        </div>
        
        <div id="player1WaitingScreen" class="player-waiting-screen is-hidden">
          <h2 class="name-screen-title">Rakibin KatÄ±lmasÄ±nÄ± Bekle</h2>
          <p id="player1DisplayName" class="waiting-name">AdÄ±nÄ±z: </p>
          <p class="waiting-message">Rakibin oyuna katÄ±lmasÄ± ve ad girmesi bekleniyor...</p>
          <button id="cancelWaitButton" class="lobby-button lobby-button--tertiary">
            Ä°ptal Et
          </button>
        </div>
        
        <div id="player2ReadyScreen" class="player-ready-screen is-hidden">
          <h2 class="name-screen-title">HazÄ±rsÄ±n!</h2>
          <p id="player1HostName" class="waiting-name">Ev Sahibi: </p>
          <p id="player2DisplayName" class="waiting-name">AdÄ±nÄ±z: </p>
          <p class="waiting-message">Oyunu baÅŸlatmak iÃ§in rakibin "BaÅŸlat" butonuna basmasÄ±nÄ± bekle</p>
          <button id="readyButton" class="lobby-button lobby-button--primary">
            HazÄ±rÄ±m
          </button>
          <button id="cancelReadyButton" class="lobby-button lobby-button--tertiary">
            Ä°ptal Et
          </button>
        </div>
        
        <div id="player1StartScreen" class="player-start-screen is-hidden">
          <h2 class="name-screen-title">Ä°lk Oyuncu</h2>
          <p id="opponentReadyMessage" class="waiting-message">Rakibin hazÄ±r oldu!</p>
          <button id="startGameButtonP1" class="lobby-button lobby-button--primary">
            Oyunu BaÅŸlat
          </button>
        </div>
        
        <div id="loadingScreen" class="loading-screen is-hidden">
          <p id="loadingMessage" class="loading-message">BaÄŸlanÄ±yor...</p>
          <div class="spinner"></div>
        </div>
        
        <div id="gameCodeDisplay" class="game-code-display is-hidden">
          <p class="code-label">Oyun Kodu:</p>
          <p id="displayedGameCode" class="displayed-code"></p>
          <p class="code-help">Bu kodu rakibinizle paylaÅŸÄ±n</p>
          <p id="waitingForPlayer" class="waiting-message">Rakinin katÄ±lmasÄ±nÄ± bekleniyor...</p>
        </div>
      </div>
    </div>

    <div class="page">
      <header class="top-bar">
        <div class="brand">
          <p class="eyebrow">ABLUKA</p>
          <h1>ABLUKA</h1>
        </div>
        <div class="status-panel" aria-live="polite">
          <div class="status-row">
            <span class="label">SÄ±ra</span>
            <span id="turnIndicator" class="value">Oyuncu 1</span>
          </div>
          <div class="status-row">
            <span class="label">Engel taÅŸÄ±</span>
            <span id="pieceCounts" class="value">0 yerleÅŸtirildi</span>
          </div>
          <div class="status-row">
            <span class="label">Durum</span>
            <span id="statusMessage" class="value">Oyuncu taÅŸÄ±nÄ± seÃ§, sonra hareket et.</span>
          </div>
        </div>
        <div class="top-actions">
          <button id="helpButton" class="help-button" type="button" aria-label="NasÄ±l oynanÄ±r">
            ?
          </button>
          <button id="settingsButton" class="help-button" type="button" aria-label="Ayarlar">
            âš™ï¸
          </button>
          <button id="rewindButton" class="help-button" type="button" aria-label="Son hamleyi geri al">
            â†º
          </button>
          <button id="newGameButton" class="help-button" type="button" aria-label="Yeni oyun">
            âŸ³
          </button>
        </div>
      </header>

      <main class="app-body">
        <section class="board-wrap">
          <div class="player-box player-box--top" id="player2Box" data-player="p2">
            <span class="player-label">Oyuncu 2</span>
            <span class="player-name-wrap">
              <span id="player2Display" class="player-name">Oyuncu 2</span>
              <button id="player2Edit" class="player-edit" type="button" aria-label="Oyuncu 2 adÄ±nÄ± dÃ¼zenle">âœ</button>
              <span id="player2Time" class="player-time">SÄ±nÄ±rsÄ±z</span>
            </span>
            <span id="player2Score" class="player-score">0</span>
            <input id="player2Name" class="player-input is-hidden" type="text" value="Oyuncu 2" aria-label="Oyuncu 2 adÄ±" />
          </div>
          <div id="board" class="board" role="grid" aria-label="Abluka board"></div>
          <div class="player-box player-box--bottom" id="player1Box" data-player="p1">
            <span class="player-label">Oyuncu 1</span>
            <span class="player-name-wrap">
              <span id="player1Display" class="player-name">Oyuncu 1</span>
              <button id="player1Edit" class="player-edit" type="button" aria-label="Oyuncu 1 adÄ±nÄ± dÃ¼zenle">âœ</button>
              <span id="player1Time" class="player-time">SÄ±nÄ±rsÄ±z</span>
            </span>
            <span id="player1Score" class="player-score">0</span>
            <input id="player1Name" class="player-input is-hidden" type="text" value="Oyuncu 1" aria-label="Oyuncu 1 adÄ±" />
          </div>
        </section>

      </main>

    </div>

    <div id="helpModal" class="help-modal" role="dialog" aria-modal="true" aria-labelledby="helpTitle" aria-hidden="true">
      <div class="help-content">
        <div class="help-header">
          <h2 id="helpTitle">NasÄ±l OynanÄ±r</h2>
          <button id="helpClose" class="help-close" type="button" aria-label="Kapat">Ã—</button>
        </div>
        <ol class="help-list">
          <li>Oyuncu 1 baÅŸlar.</li>
          <li>Oyuncu taÅŸÄ±nÄ± seÃ§.</li>
          <li>Her yÃ¶ne 1 kare hareket et.</li>
          <li>Herhangi bir boÅŸ kareye engel taÅŸÄ± koy.</li>
          <li>Oyuncu taÅŸlarÄ± aynÄ± karede olamaz.</li>
        </ol>
        <h3 class="help-subtitle">Kazanma ÅartÄ±</h3>
        <p>Rakibi hiÃ§ yasal hamle kalmayacak ÅŸekilde kilitle.</p>
        <h3 class="help-subtitle">AÃ§Ä±klama</h3>
        <div class="legend-row">
          <span class="pawn p1"></span>
          <span>Oyuncu 1 oyuncu taÅŸÄ± (siyah)</span>
        </div>
        <div class="legend-row">
          <span class="pawn p2"></span>
          <span>Oyuncu 2 oyuncu taÅŸÄ± (beyaz)</span>
        </div>
        <div class="legend-row">
          <span class="barrier-swatch"></span>
          <span>Engel taÅŸÄ±</span>
        </div>
        <div class="help-footer">
          <span>FAMO</span>
          <span>Yasin ALEV</span>
        </div>
      </div>
    </div>

    <div id="winModal" class="help-modal" role="dialog" aria-modal="true" aria-labelledby="winTitle" aria-hidden="true">
      <div class="help-content">
        <div class="help-header">
          <h2 id="winTitle">Oyun Bitti</h2>
          <button id="winClose" class="help-close" type="button" aria-label="Kapat">Ã—</button>
        </div>
        <p id="winMessage" class="win-message">Kazanan: Oyuncu 1</p>
        <button id="newRound" class="bottom-btn" type="button">Yeni MaÃ§</button>
      </div>
    </div>

    <div id="settingsModal" class="help-modal" role="dialog" aria-modal="true" aria-labelledby="settingsTitle" aria-hidden="true">
      <div class="help-content">
        <div class="help-header">
          <h2 id="settingsTitle">Ayarlar</h2>
          <button id="settingsClose" class="help-close" type="button" aria-label="Kapat">Ã—</button>
        </div>
        <h3 class="help-subtitle">SÃ¼re</h3>
        <div class="settings-options">
          <button class="settings-option" data-time="unlimited">SÄ±nÄ±rsÄ±z</button>
          <button class="settings-option" data-time="60">1 dk</button>
          <button class="settings-option" data-time="180">3 dk</button>
          <button class="settings-option" data-time="300">5 dk</button>
        </div>
        <h3 class="help-subtitle">Ses</h3>
        <div class="settings-audio">
          <input id="volumeSlider" class="settings-slider" type="range" min="0" max="100" value="60" />
          <button id="muteButton" class="settings-audio-button" type="button" aria-label="Ses">
            <span class="mute-icon" aria-hidden="true">ğŸ”Š</span>
          </button>
        </div>
        <h3 class="help-subtitle">Tema</h3>
        <div class="settings-audio">
          <button id="darkModeToggle" class="settings-audio-button" type="button" aria-label="Koyu mod">
            <span class="dark-mode-icon" aria-hidden="true">ğŸŒ™</span>
          </button>
        </div>
        <div class="color-picker">
          <button class="color-option active" data-theme="red" style="background: #d63a35;" aria-label="KÄ±rmÄ±zÄ± tema"></button>
          <button class="color-option" data-theme="blue" style="background: #3b82f6;" aria-label="Mavi tema"></button>
          <button class="color-option" data-theme="green" style="background: #10b981;" aria-label="YeÅŸil tema"></button>
          <button class="color-option" data-theme="purple" style="background: #a855f7;" aria-label="Mor tema"></button>
          <button class="color-option" data-theme="amber" style="background: #f59e0b;" aria-label="Turuncu tema"></button>
        </div>
      </div>
    </div>

    <!-- Firebase SDK -->
    <script src="config.js"></script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
      import { getDatabase, ref, set, update, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-database.js";
      
      window.firebaseApp = initializeApp(firebaseConfig);
      window.firebaseDB = getDatabase(window.firebaseApp);
      window.firebaseRef = ref;
      window.firebaseSet = set;
      window.firebaseUpdate = update;
      window.firebaseOnValue = onValue;
      window.firebaseRemove = remove;
    </script>
    <script src="firebase-game.js"></script>
    <script src="main.js"></script>
  </body>
</html>
